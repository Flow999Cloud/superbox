/**
 * SuperBox v2.0.3
 * 
 * The lightbox reimagined. Fully responsive HTML5 image galleries.
 * 
 * Latest version: https://github.com/toddmotto/superbox
 * 
 * Copyright 2013 Todd Motto <http://www.toddmotto.com> / Adam Merrifield <http://seydesign.com>
 * 
 * Licensed under the MIT license <http://www.opensource.org/licenses/mit-license.php>
 */
(function(a){a.fn.SuperBox=function(l){var e=a.extend({background:null,border:null,xColor:null,xShadow:"none"},l);var d,c,k=a('<div class="superbox-show superbox-X"/>'),j=a('<img src="" class="superbox-current-img"/>'),b=a('<a href="#" class="superbox-close">&#215;</a>'),g=a('<div class="superbox-float"/>'),h=this.find(">div");var i=(function(n){var m=n.next(".superbox-O");m.removeClass("superbox-O").addClass("superbox-X");if(d!=c){m.find("img.superbox-current-img, a.superbox-close").animate({opacity:0},100).end().slideUp(function(){c=0;d=0})}else{m.find("img.superbox-current-img").animate({opacity:0},100).end().hide()}});var f=(function(n){var m=n.next();m.removeClass("superbox-X").addClass("superbox-O");if(d!=c){m.slideDown(function(){c=a(".superbox-O").offset().top;a("html,body").animate({scrollTop:c-((a(window).height()-a(".superbox-O").height())/2)},"fast");d=a(this).prev().find("img").offset().top+a(this).prev().find("img").height()}).find("img.superbox-current-img").animate({opacity:1},1000).end().find("a.superbox-close").animate({opacity:0.7},1000)}else{m.show().find("img.superbox-current-img").animate({opacity:1},1000).end().find("a.superbox-close").css("opacity","0.7")}});k.append(j).append(b).insertAfter(h);g.appendTo(this);this.addClass("superbox-active");if(e.background!==null){h.next().css({"background-color":e.background})}if(e.border!==null){h.next().find("img.superbox-current-img").css({"border-color":e.border})}if(e.xColor!==null){h.next().find("a.superbox-close").css({color:e.xColor})}if(e.xShadow=="emboss"){h.next().find("a.superbox-close").css({"text-shadow":"0 1px 0 rgba(0,0,0,0.6), 0 -1px 0 rgba(250,250,250,0.2)"})}else{if(e.xShadow=="embed"){h.next().find("a.superbox-close").css({"text-shadow":"0 -1px 0 rgba(0,0,0,0.4), 0 1px 0 rgba(250,250,250,0.5)"})}}h.each(function(){var m=a(this).find("img").data("img");a(this).next().find("img.superbox-current-img").attr("src",m);a(this).on("click",function(){d=a(this).find("img").offset().top+a(this).find("img").height();if(!a(this).next(".superbox-O").length){i(h)}if(a(this).next(".superbox-O").length){d=0;i(a(this))}else{f(a(this))}})});a(".superbox-close").on("click",function(m){m.preventDefault();d=0;i(a(this).parent().prev())});return this}})(jQuery);