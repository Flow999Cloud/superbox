(function(c,d){var b="SuperBox",a="3.1.0";c.fn.SuperBox=function(g){var n=c.extend({background:null,border:null,height:400,view:"landscape",xColor:null,xShadow:"none"},g);var k=false,h=false,x=c('<div class="superbox-show"/>'),y=c('<img src="img/ajax-loader.gif" class="superbox-current-img"/>'),z=c('<a href="#" class="superbox-close"><i class="icon-remove-sign"></i></a>'),m=c('<a href="#" class="superbox-prev"><i class="icon-circle-arrow-left"></i></a>'),o=c('<a href="#" class="superbox-next"><i class="icon-circle-arrow-right"></i></a>'),i=c('<div class="superbox-float"/>'),w=this.find(">div"),r=this.find(">div:nth-child(8n)"),s=this.find(">div:nth-child(6n)"),u=this.find(">div:nth-child(4n)"),v=this.find(">div:nth-child(2n)"),e=this;var p=function(A){var B=function(D){var F,G="superbox-"+D,C=["superbox-last","superbox-8","superbox-6","superbox-4","superbox-2"];if(D===8){F=r}else{if(D===6){F=s}else{if(D===4){F=u}else{if(D===2){F=v}}}}for(var E=C.length-1;E>=0;E--){w.removeClass(C[E])}w.addClass(G);F.add(w.last()).addClass("superbox-last");if(e.find(".superbox-show").outerWidth(true)!=w.width()*D){e.find(".superbox-show").outerWidth(w.width()*D)}};if(e.width()>1024){B(8)}else{if(e.width()>767){B(6)}else{if(e.width()>320){B(4)}else{B(2)}}}};var j=(function(){var F=e.find(".superbox-show").outerWidth(true),E=n.height+(16*3),A=E,B=c(window).height()*0.8,D=n.view,C=0.6667;if(A>B){A=B}if((D==="landscape")&&(F<A/C)){A=F*C}if((D==="portrait")&&(F<A*C)){A=F/C}if((D==="square")&&(F<A)){A=F}e.find(".superbox-show").outerHeight(A)});var l=function(E){var B=!e.find(".superbox-show").length,A=E.hasClass("superbox-O"),L=!E.hasClass("superbox-last"),O=!E.nextAll(".superbox-last:first").next(".superbox-show").length,I=!E.next(".superbox-show").length,M=function(P){if(P==="A"){x.append(y).append(z).append(m).append(o).insertAfter(E.nextAll(".superbox-last:first"))}else{x.append(y).append(z).insertAfter(E)}j();p();F();e.find(".superbox-show").slideDown("slow",function(){K();J(true);G(true);if(h===false){e.find(".superbox-prev,.superbox-next").on("click",function(Q){f(c(this),Q);h=true});c(document.documentElement).keyup(function(Q){f(c(this),Q);h=true})}})},F=function(){e.find(".superbox-show img.superbox-current-img").attr("src",E.find("img").data("img"));C()},C=function(){var Q=new Image(),P=new Image();Q.src=E.prev(".superbox-list").find("img").data("img");P.src=E.nextAll(".superbox-list:first").find("img").data("img")},K=function(){c("html, body").animate({scrollTop:e.find(".superbox-show").offset().top-E.width()},"medium")},J=function(P){if(P===true){w.removeClass("superbox-O");E.addClass("superbox-O")}else{w.removeClass("superbox-O")}},G=function(P){if(P===true){e.find(".superbox-show img.superbox-current-img").animate({opacity:1},750);if(k===false){N(true)}}else{e.find(".superbox-show img.superbox-current-img").animate({opacity:0},100,function(){F()})}},N=function(P){if(P===true){k=true;e.find(".superbox-close, .superbox-prev, .superbox-next").animate({opacity:0.7},750)}else{k=false;e.find(".superbox-close, .superbox-prev, .superbox-next").animate({opacity:0},100)}},H=function(){G(false);G(true);J(true)},D=function(){var P=function(){G(false);N(false);e.find(".superbox-show").slideUp(function(){c(this).remove();J(false);h=false})};e.find(".superbox-close").on("click",function(Q){Q.preventDefault();P()});if(A===true){P()}};if(A===false){if(L===true&&O===true){if(B===true){M("A")}else{G(false);N(false);e.find(".superbox-show").slideUp(function(){M("A")})}}else{if(L===false&&I===true){if(B===true){M("B")}else{G(false);N(false);e.find(".superbox-show").slideUp(function(){M("B")})}}else{H()}}}D()};var t=function(){c(window).resize(function(){if(e.find(".superbox-O").hasClass("superbox-last")){e.find(".superbox-show").insertAfter(e.find(".superbox-O"))}else{e.find(".superbox-show").insertAfter(e.find(".superbox-O").nextAll(".superbox-last:first"))}})};var q=function(){if(n.background!==null){e.find(".superbox-show").css("background-color",n.background)}if(n.border!==null){e.find(".superbox-show img.superbox-current-img").css("border-color",n.border)}if(n.xColor!==null){e.find(".superbox-close, .superbox-prev, .superbox-next").css("color",n.xColor)}if(n.xShadow=="emboss"){e.find(".superbox-close, .superbox-prev, .superbox-next").css("text-shadow","0 1px 0 rgba(0,0,0,0.6), 0 -1px 0 rgba(250,250,250,0.2)")}else{if(n.xShadow=="embed"){e.find(".superbox-close, .superbox-prev, .superbox-next").css("text-shadow","0 -1px 0 rgba(0,0,0,0.4), 0 1px 0 rgba(250,250,250,0.5)")}}};var f=function(B,C){C.preventDefault();var D=null,A=null;if(C.keyCode==37||B.hasClass("superbox-prev")){D="prev";A=".superbox-list"}else{if(C.keyCode==39||B.hasClass("superbox-next")){D="nextAll";A=".superbox-list:first"}}if(D!==null){e.find(".superbox-O")[D](A).click()}};this.addClass("superbox-active");w.addClass("superbox-list");p();c(window).resize(function(){j();p()});i.appendTo(this);w.on("mouseenter",function(){var A=new Image(),B=c(this).find("img").data("img");c(A).attr("src",B)});w.on("click",function(){l(c(this));q()});t();return this}})(jQuery);