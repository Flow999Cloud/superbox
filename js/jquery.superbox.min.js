(function(c,d){var b="SuperBox",a="3.0.3";c.fn.SuperBox=function(f){var j=c.extend({background:null,border:null,height:400,view:"landscape",xColor:null,xShadow:"none"},f);var u,s,t=c('<div class="superbox-show"/>'),v=c('<img src="img/ajax-loader.gif" class="superbox-current-img"/>'),w=c('<a href="#" class="superbox-close"><i class="icon-cancel-circle"></i></a>'),g=c('<div class="superbox-float"/>'),r=this.find(">div"),m=this.find(">div:nth-child(8n)"),n=this.find(">div:nth-child(6n)"),o=this.find(">div:nth-child(4n)"),q=this.find(">div:nth-child(2n)");var k=function(x){var y=function(A){var C,D="superbox-"+A,z=["superbox-last","superbox-8","superbox-6","superbox-4","superbox-2"];if(A===8){C=m}else{if(A===6){C=n}else{if(A===4){C=o}else{if(A===2){C=q}}}}for(var B=z.length-1;B>=0;B--){r.removeClass(z[B])}r.addClass(D);C.addClass("superbox-last");if(c(".superbox-show").outerWidth(true)!=r.width()*A){c(".superbox-show").outerWidth(r.width()*A)}};if(c(".superbox-active").width()>1024){y(8)}else{if(c(".superbox-active").width()>767){y(6)}else{if(c(".superbox-active").width()>485){y(4)}else{y(2)}}}};var h=(function(){var C=c(".superbox-show").outerWidth(true),B=j.height+(16*3),x=B,y=c(window).height()*0.8,A=j.view,z=0.6667;if(x>y){x=y}if((A==="landscape")&&(C<x/z)){x=C*z}if((A==="portrait")&&(C<x*z)){x=C/z}if((A==="square")&&(C<x)){x=C}c(".superbox-show").outerHeight(x)});var i=function(B){var y=!c(".superbox-show").length,x=B.hasClass("superbox-O"),H=!B.hasClass("superbox-last"),K=!B.nextAll(".superbox-last:first").next(".superbox-show").length,J=!B.next(".superbox-show").length,I=function(L){if(L==="A"){t.append(v).append(w).insertAfter(B.nextAll(".superbox-last:first"))}else{t.append(v).append(w).insertAfter(B)}h();k();C();c(".superbox-show").slideDown("slow",function(){G();F(true)})},C=function(){c(".superbox-show img.superbox-current-img").attr("src",B.find("img").data("img"));z()},z=function(){var M=new Image(),L=new Image();M.src=B.prev().find("img").data("img");L.src=B.next().find("img").data("img")},G=function(){c("html, body").animate({scrollTop:c(".superbox-show").position().top-B.width()},"medium",function(){D(true)})},F=function(L){if(L===true){r.removeClass("superbox-O");B.addClass("superbox-O")}else{r.removeClass("superbox-O")}},D=function(L){if(L===true){c(".superbox-show img.superbox-current-img").animate({opacity:1},750)}else{c(".superbox-show img.superbox-current-img").animate({opacity:0},100,function(){C()})}},E=function(){D(false);D(true);F(true)},A=function(){var L=function(){D(false);c(".superbox-show").slideUp(function(){c(this).remove();F(false);D(false)})};c(".superbox-close").on("click",function(M){M.preventDefault();L()});if(x===true){L()}};if(x===false){if(H===true&&K===true){if(y===true){I("A")}else{D(false);c(".superbox-show").slideUp(function(){I("A")})}}else{if(H===false&&J===true){if(y===true){I("B")}else{D(false);c(".superbox-show").slideUp(function(){I("B")})}}else{E()}}}A()};var p=function(){c(window).resize(function(){if(c(".superbox-O").hasClass("superbox-last")){c(".superbox-show").insertAfter(c(".superbox-O"))}else{c(".superbox-show").insertAfter(c(".superbox-O").nextAll(".superbox-last:first"))}})};var l=function(){if(j.background!==null){c(".superbox-show ").css("background-color",j.background)}if(j.border!==null){c(".superbox-show img.superbox-current-img").css("border-color",j.border)}if(j.xColor!==null){c(".superbox-close").css("color",j.xColor)}if(j.xShadow=="emboss"){c(".superbox-close").css("text-shadow","0 1px 0 rgba(0,0,0,0.6), 0 -1px 0 rgba(250,250,250,0.2)")}else{if(j.xShadow=="embed"){c(".superbox-close").css("text-shadow","0 -1px 0 rgba(0,0,0,0.4), 0 1px 0 rgba(250,250,250,0.5)")}}};var e=function(){c(document.documentElement).keyup(function(y){var z=null,x=null;if(y.keyCode==37){z="prev";x=".superbox-list"}else{if(y.keyCode==39){z="nextAll";x=".superbox-list:first"}}if(z!==null){c(".superbox-O")[z](x).click()}})};this.addClass("superbox-active");r.addClass("superbox-list");k();c(window).resize(function(){h();k()});g.appendTo(this);r.on("click",function(){i(c(this));l()});p();e();return this}})(jQuery);